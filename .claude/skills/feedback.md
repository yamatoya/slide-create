# feedback

Webベースのスライドフィードバックシステムを使ってレビューを行うスキル。

## 概要

スライドをプレビューしながらコメントを付け、修正指示をJSON形式で出力する。
これにより、スライドを順番に見てコメントを付けていくだけで一気に修正できる。

## 起動方法

### Step 1: Marpサーバーを起動

```bash
./scripts/start-server.sh slides/example.md
```

### Step 2: フィードバックUIを開く

```bash
open tools/feedback/index.html
```

または、ブラウザで `tools/feedback/index.html` を直接開く。

## 機能

### スライドプレビュー
- iframe内でMarpサーバーのスライドを表示
- ← → キーまたはボタンでスライド移動
- フルスクリーン表示対応

### コメント管理
- スライド単位でコメントを追加・削除
- LocalStorageに自動保存
- 全コメント一覧表示

### クイックアクションボタン

| ボタン | 挿入されるプロンプト |
|-------|---------------------|
| スタイル整形 | `/slide-style-rector をつかってスタイルを整える` |
| レイアウト修正 | `/layout-fix をつかってレイアウト崩れを修正して` |
| 説明イラスト作成 | `/ergon をつかって説明イラストを作成して挿入して` |
| 背景画像作成 | `/ergon をつかって背景画像を作成して挿入して` |

### レイアウト選択モーダル
- 40パターンをカテゴリ別に表示
- クリックで選択、自動的にコメントに挿入
- 例: `このスライドを「パターン6: 2カラム比較」のレイアウトに変更して`

### JSON出力
「JSONコピー」ボタンでクリップボードにコピー：

```json
{
  "file": "slides/example.md",
  "timestamp": "2026-02-02T10:00:00.000Z",
  "feedback": [
    {
      "slide": 4,
      "comments": [
        "このスライドを「パターン6: 2カラム比較」のレイアウトに変更して",
        "/layout-fix をつかってレイアウト崩れを修正して"
      ]
    },
    {
      "slide": 18,
      "comments": [
        "テキストが多すぎるので要約して"
      ]
    }
  ]
}
```

## ワークフロー

1. **feedbackシステムでスライドをプレビュー**
   - サーバー起動 → UIを開く
   - スライドを順番に確認

2. **気になるスライドにコメント追加**
   - 自由記述
   - クイックアクションボタン
   - レイアウト選択モーダル

3. **JSONをコピーしてClaude Codeに渡す**
   ```
   以下のフィードバックを元にスライドを修正して：
   {JSONをペースト}
   ```

4. **Claude Codeが修正を実行**
   - 各スライドのコメントを順番に処理
   - スキル（/slide-style-rector, /layout-fix, /ergon）を活用

5. **feedbackシステムで結果を確認**
   - ブラウザをリロード
   - 修正が反映されていることを確認

## ファイル構成

```
tools/feedback/
└── index.html    # フィードバックUI（単一ファイル）
```

## 注意事項

- Marpサーバーが `localhost:8080` で起動している必要がある
- CORSの関係でfile://からは一部機能が制限される場合がある
- コメントはLocalStorageに保存されるため、ブラウザをクリアすると消える
